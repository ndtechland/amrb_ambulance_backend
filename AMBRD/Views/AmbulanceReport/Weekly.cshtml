@model AMBRD.Models.ViewModels.AmbulanceReportDTO
@{
    ViewBag.Title = "Weekly";
    Layout = null;
    int i = 1;
}

<style>
    #main {
        margin: 4%;
    }
</style>
<!-- Datatable css-->
<link rel="stylesheet" type="text/css" href="../assets/css/datatables.css">
<div class="page-wrapper">
    <div class="page-body-wrapper">
        <div class="page-body">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="card">
                            <div class="card-body">
                                @using (Html.BeginForm("Weekly", "AmbulanceReport", FormMethod.Get))
                                {
                                    <div class="row">
                                        <div class="col-md-4">
                                            Select Date
                                            @Html.TextBoxFor(a => a.sdate, new { @class = "datepicker form-control", required = "required", type = "date" })
                                        </div>
                                        <div class="col-md-4" style="margin-top:17px;">
                                            <input type="submit" id="test" value="Search" class="btn btn-secondary" />
                                        </div>
                                    </div>
                                }

                                @if (Model.AmbulanceYMWDRecord == null)
                                {
                                    if (TempData["msg"] != null)
                                    {
                                        <h2 style="color:blueviolet">
                                            @TempData["msg"]
                                        </h2>
                                    }
                                }
                                else
                                {
                                    <div class="card-body">
                                        <table class="display" id="basic-1">
                                            <thead>
                                                <tr>
                                                    <th>
                                                        S#
                                                    </th>
                                                    <th>
                                                        Vehicle Number
                                                    </th>
                                                    <th>
                                                        Vehicle Name
                                                    </th>
                                                    <th>
                                                        Booking Date
                                                    </th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var item in Model.AmbulanceYMWDRecord)
                                                {
                                                    <tr>
                                                        <td>
                                                            @i
                                                        </td>
                                                        <td>
                                                            @item.VehicleNumber
                                                        </td>
                                                        <td>
                                                            @item.VehicleName
                                                        </td>
                                                        <td>
                                                            @item.EntryDate
                                                        </td>
                                                        <td>
                                                            <a href="/AmbulanceReport/WeeklyReport?Id=@item.Id">View Record</a>
                                                        </td>
                                                    </tr>
                                                    i++;
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Datatables js-->
<script src="../assets/js/datatables/jquery.dataTables.min.js"></script>
<script src="../assets/js/datatables/custom-basic.js"></script>

<script src="~/assets/js/jquery-3.3.1.min.js"></script>
<link href="~/css/jquery-ui.css" rel="stylesheet" />
<script src="~/Scripts/jquery-ui.js"></script>


<script>
    $(".datepicker").datepicker().datepicker('setdate', 'today');

    //$(".datepicker").datepicker({dateFormat: "yy/mm/dd",}).val();

    $("#test").click(function () {
        debugger
        var sdate = $("#sdate").val();
        var edate = $("#edate").val();
        $.ajax({
            url: "/AmbulanceReport/Weekly?date=" + sdate + "",
            type: "get",
            success: function (response) {
                console.log(response);
                $("#prevAtt").html(response);
            },
            error: function (error) {
                console.log(error.responseText);
                msg.text("");
            }
        });
    })
</script>

